@using EsccWebTeam.Data.Web
@using EsccWebTeam.EastSussexGovUK.MasterPages.Remote
@inherits Umbraco.Web.Mvc.UmbracoViewPage<IList<Escc.EastSussexGovUK.Umbraco.Models.AlertViewModel>> 
@{
    Layout = null;
    Response.ContentType = "application/json";
    Cors.AllowCrossOriginRequest(HttpContext.Current.Request, HttpContext.Current.Response, new RemoteMasterPageXmlConfigurationProvider().CorsAllowedOrigins());
<text>[</text>for (var i = 0; i < Model.Count; i++)
    {
<text>{"alert":"@HttpUtility.JavaScriptStringEncode(Model[i].Alert.ToString())","urls":[</text>for (var j = 0; j < Model[i].TargetUrls.Count; j++)
            {
<text>"</text>@HttpUtility.JavaScriptStringEncode(Model[i].TargetUrls[j].ToString())<text>"</text>if (j < Model[i].TargetUrls.Count - 1) {<text>,</text>}
            }
<text>],"append":@HttpUtility.JavaScriptStringEncode(Model[i].Append.ToString().ToLowerInvariant()),"cascade":@HttpUtility.JavaScriptStringEncode(Model[i].Cascade.ToString().ToLowerInvariant())}</text>if (i < Model.Count - 1)
         {
<text>,</text>}
    }
<text>]</text>
}