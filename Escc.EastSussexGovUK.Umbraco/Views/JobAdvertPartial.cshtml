@using Escc.Dates
@using Escc.Web
@model Escc.EastSussexGovUK.Umbraco.Jobs.JobAdvertViewModel
<div class="content text-content">
    <h1>@Model.Metadata.Title</h1>
</div>
@Html.Partial("~/Views/EastSussexGovUK/Features/_Latest.cshtml")
<div class="supporting content-small content-medium text-content">
    <table>
        <tbody>
            @if (!String.IsNullOrEmpty(Model.Job.Reference))
            {
                <tr><th id="job-reference">Job reference</th><td>@Model.Job.Reference</td></tr>
            }
            @if (!String.IsNullOrEmpty(Model.Job.Location))
            {
                <tr><th>Location</th><td>@Model.Job.Location</td></tr>
            }
            @if (!String.IsNullOrEmpty(Model.Job.Organisation))
            {
                <tr><th>Organisation</th><td>@Model.Job.Organisation</td></tr>
            }
            @if (!String.IsNullOrEmpty(Model.Job.Department))
            {
                <tr><th>Department</th><td>@Model.Job.Department</td></tr>
            }
            @if (!String.IsNullOrEmpty(Model.Job.ContractType))
            {
                <tr><th>Contract type</th><td>@Model.Job.ContractType</td></tr>
            }
            @if (!String.IsNullOrEmpty(Model.Job.JobType))
            {
                <tr><th>Job type</th><td>@Model.Job.JobType</td></tr>
            }
            @if (!String.IsNullOrEmpty(Model.Job.Salary.SalaryRange))
            {
                <tr><th>Salary</th><td>@Model.Job.Salary.SalaryRange</td></tr>
            }
            @if (Model.Job.ClosingDate.HasValue)
            {
                <tr><th>Closing date</th><td>@Model.Job.ClosingDate.Value.ToBritishDateWithDay()</td></tr>
            }
        </tbody>
    </table>
</div>

<div class="article">
    <div class="content text-content">
        @Model.Job.AdvertHtml
        @if (Model.Job.ApplyUrl != null)
        {
            <p class="main-action"><a href="@Model.Job.ApplyUrl">Apply</a></p>
        }
    </div>
</div>
@Html.Partial("~/Views/Layouts/_SocialMedia.cshtml")
@Html.Partial("~/Views/EastSussexGovUK/Features/_SupportingContentDesktop.cshtml")
<script type="application/ld+json">
    {
    "@@context": "http://schema.org",
    "@@type": "JobPosting",
@if (Model.Job.Salary.MinimumSalary.HasValue) {
    @:"baseSalary": {
    @:    "@@type": "MonetaryAmount",
    @:    "currency": "GBP",
    @:    "minValue": "@Model.Job.Salary.MinimumSalary",
    @:    "maxValue": "@Model.Job.Salary.MaximumSalary"
    @:            },
}
    "title": "@Model.Job.JobTitle",
    "employmentType": "@Model.Job.ContractType",
    "industry": "Local government",
    "jobLocation": {
        "@@type": "Place",
        "address": {
            "@@type": "PostalAddress",
            "addressLocality": "@Model.Job.Location"
            }  
        },
    "salaryCurrency": "GBP",
    "hiringOrganization": {
        "@@type": "Organization",
        "name": "@Model.Job.Organisation"
        }
    },
    "validThrough": "@Model.Job.ClosingDate.Value.ToIso8601DateTime()",
    "url": "@Model.Job.Url"
</script>